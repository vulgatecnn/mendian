# 好饭碗门店生命周期管理系统 - 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置

# ============================================================================
# 基础配置
# ============================================================================
NODE_ENV=production
BUILD_TARGET=production
BUILD_DATE=2025-08-29T00:00:00Z
VCS_REF=latest

# ============================================================================
# 服务端口配置
# ============================================================================
FRONTEND_PORT=80
BACKEND_PORT=7900
POSTGRES_PORT=5432
REDIS_PORT=6379

# 开发工具端口
ADMINER_PORT=8081
REDIS_WEB_PORT=8082
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
LOKI_PORT=3100
LB_PORT=8080

# ============================================================================
# 数据库配置
# ============================================================================
POSTGRES_DB=mendian
POSTGRES_USER=mendian_user
POSTGRES_PASSWORD=your-super-secure-database-password-change-this

# 数据库连接 URL
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================================================
# Redis 配置
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PREFIX=mendian:
REDIS_WEB_USER=admin
REDIS_WEB_PASSWORD=admin123

# ============================================================================
# JWT 认证配置
# ============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production-must-be-at-least-32-characters-long
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# ============================================================================
# 企业微信集成配置
# ============================================================================
WECHAT_WORK_CORP_ID=your-corp-id
WECHAT_WORK_AGENT_ID=your-agent-id
WECHAT_WORK_SECRET=your-app-secret

# 企业微信回调配置
WECHAT_WORK_TOKEN=your-callback-token
WECHAT_WORK_ENCODING_AES_KEY=your-encoding-aes-key

# 企业微信 OAuth 配置
WECHAT_WORK_REDIRECT_URI=https://your-domain.com/auth/wechat/callback

# ============================================================================
# 文件上传配置
# ============================================================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=50MB
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

# 对象存储配置 (可选，用于生产环境)
# OSS_ENDPOINT=your-oss-endpoint
# OSS_ACCESS_KEY_ID=your-access-key
# OSS_ACCESS_KEY_SECRET=your-secret-key
# OSS_BUCKET=your-bucket-name

# ============================================================================
# 日志配置
# ============================================================================
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_MAX_FILES=10
LOG_MAX_SIZE=10MB

# ============================================================================
# 安全配置
# ============================================================================
# 跨域配置
CORS_ORIGIN=http://localhost:3000,http://localhost:7800
CORS_CREDENTIALS=true

# 速率限制
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# 会话配置
SESSION_SECRET=your-session-secret-change-this
SESSION_MAX_AGE=86400000

# ============================================================================
# 邮件配置 (可选)
# ============================================================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-email-password
SMTP_FROM_NAME=好饭碗门店管理系统
SMTP_FROM_EMAIL=noreply@your-domain.com

# ============================================================================
# 监控配置 (可选)
# ============================================================================
GRAFANA_PASSWORD=admin123
PROMETHEUS_RETENTION=15d

# Sentry 错误监控 (可选)
# SENTRY_DSN=your-sentry-dsn
# SENTRY_ENVIRONMENT=production

# APM 配置 (可选)
# APM_SERVER_URL=your-apm-server-url
# APM_SECRET_TOKEN=your-apm-secret-token

# ============================================================================
# CDN 和静态资源配置 (可选)
# ============================================================================
CDN_URL=https://cdn.your-domain.com
STATIC_URL=https://static.your-domain.com

# ============================================================================
# SSL/HTTPS 配置 (可选)
# ============================================================================
SSL_CERT_PATH=/etc/ssl/certs/your-domain.crt
SSL_KEY_PATH=/etc/ssl/private/your-domain.key

# ============================================================================
# 云服务配置 (生产环境)
# ============================================================================

# AWS 配置
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_STAGING_BUCKET=your-staging-bucket
AWS_S3_PRODUCTION_BUCKET=your-production-bucket
AWS_S3_BACKUP_BUCKET=your-backup-bucket
AWS_CLOUDFRONT_DISTRIBUTION_STAGING=your-staging-distribution-id
AWS_CLOUDFRONT_DISTRIBUTION_PRODUCTION=your-production-distribution-id

# 阿里云配置 (可选)
# ALIYUN_REGION=cn-hangzhou
# ALIYUN_ACCESS_KEY_ID=your-aliyun-access-key
# ALIYUN_ACCESS_KEY_SECRET=your-aliyun-secret-key
# ALIYUN_OSS_BUCKET=your-oss-bucket

# ============================================================================
# Kubernetes 配置 (可选)
# ============================================================================
KUBE_CONFIG_DATA=your-base64-encoded-kubeconfig
KUBE_NAMESPACE_STAGING=staging
KUBE_NAMESPACE_PRODUCTION=production

# ============================================================================
# 第三方服务配置
# ============================================================================

# 短信服务 (可选)
# SMS_PROVIDER=aliyun
# SMS_ACCESS_KEY=your-sms-access-key
# SMS_SECRET_KEY=your-sms-secret-key
# SMS_SIGN_NAME=your-sms-sign

# 地图服务 (可选)
# MAP_API_KEY=your-map-api-key

# 支付服务 (可选)
# ALIPAY_APP_ID=your-alipay-app-id
# ALIPAY_PRIVATE_KEY=your-alipay-private-key
# WECHAT_PAY_MCH_ID=your-wechat-pay-mch-id
# WECHAT_PAY_API_KEY=your-wechat-pay-api-key

# ============================================================================
# 开发工具配置
# ============================================================================

# 代码覆盖率
CODECOV_TOKEN=your-codecov-token

# Snyk 安全扫描
SNYK_TOKEN=your-snyk-token

# 监控 Webhook
MONITORING_WEBHOOK_URL=your-monitoring-webhook-url

# ============================================================================
# 功能开关 (可选)
# ============================================================================
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_SMS_VERIFICATION=false
FEATURE_WECHAT_LOGIN=true
FEATURE_MOBILE_APP=true
FEATURE_DARK_MODE=true
FEATURE_MULTI_LANGUAGE=false

# ============================================================================
# 性能配置
# ============================================================================
# Node.js 内存限制
NODE_OPTIONS=--max-old-space-size=4096

# 数据库连接池
DB_POOL_MIN=5
DB_POOL_MAX=25
DB_POOL_IDLE_TIMEOUT=30000

# Redis 连接池
REDIS_POOL_SIZE=10
REDIS_CONNECT_TIMEOUT=10000

# ============================================================================
# 缓存配置
# ============================================================================
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_API_RESPONSE=300
CACHE_TTL_STATIC_RESOURCES=31536000

# ============================================================================
# 时区和本地化
# ============================================================================
TZ=Asia/Shanghai
DEFAULT_LOCALE=zh-CN
SUPPORTED_LOCALES=zh-CN,en-US

# ============================================================================
# 备份配置 (可选)
# ============================================================================
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_ENCRYPT_KEY=your-backup-encryption-key