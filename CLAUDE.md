# 好饭碗门店生命周期管理系统 - 项目级开发指导

## 项目信息

- **项目名称**: 好饭碗门店生命周期管理系统
- **项目类型**: 企业级门店管理平台
- **技术栈**: React + TypeScript + Node.js + PostgreSQL
- **版本**: v1.0
- **最后更新**: 2025-08-28

---

## 项目特定开发规范

### 业务领域约定

#### 核心业务模块
- **开店计划管理**: 年度/季度开店规划，按地区/类型分类管理
- **拓店管理**: 候选点位管理、铺位跟进、商务条件谈判
- **开店筹备管理**: 工程施工、验收确认、门店交付
- **门店档案**: 门店主数据管理、历史资料整合
- **门店运营**: 付款项管理、资产管理（二期）
- **审批中心**: 全流程审批引擎，支持报店、执照、比价等业务
- **基础数据**: 大区、供应商、主体、客户等主数据管理

#### 用户角色定义
- **总裁办人员**: 经营大屏、数据报表查看
- **商务人员**: 开店计划、拓店、筹备、审批全流程
- **运营人员**: 计划管理、候选点位、拓店跟进
- **销售人员**: 跟进管理、交付管理、门店档案
- **财务人员**: 跟进审批参与
- **加盟商/店长**: 交付确认、门店档案查看
- **系统管理员**: 基础数据、系统管理、审批模板配置

### 代码组织规范

#### 目录结构约定
```
/frontend/
  /src/
    /components/     # 通用组件
    /pages/         # 业务页面
      /store-plan/   # 开店计划
      /expansion/    # 拓店管理
      /preparation/  # 开店筹备
      /store-files/  # 门店档案
      /operation/    # 门店运营
      /approval/     # 审批中心
      /basic-data/   # 基础数据
    /services/      # API服务层
    /utils/         # 工具函数
    /types/         # TypeScript类型定义

/backend/
  /src/
    /controllers/   # 控制器层
    /services/      # 业务逻辑层
    /repositories/ # 数据访问层
    /models/       # 数据模型
    /middleware/   # 中间件
    /utils/        # 工具函数
```

#### 命名规范
- **API路由**: `/api/v1/store-plans`, `/api/v1/expansion/candidates`
- **组件命名**: `StorePlanList`, `CandidateLocationForm`
- **服务命名**: `storePlanService`, `expansionService`
- **数据库表**: `store_plans`, `candidate_locations`, `follow_up_records`

### 集成约定

#### 企业微信集成
- 使用企业微信API进行用户认证
- 部门架构从企微同步
- 移动端通过企微工作台入口
- 消息通知推送到企微

#### 审批流程引擎
- 支持自定义审批模板配置
- 预设7类业务审批模板
- 支持节点跳转、加签、转交等操作
- 审批数据支持批量导出

---

## PRD评审指导原则

### 评审范围限制

在进行PRD文档评审时，**严格限制评审范围**，以下方面**不进行评估**：

#### ❌ 不评估的内容
1. **人力资源评估**
   - 不评估人员配置是否合理
   - 不评估团队技能匹配度
   - 不评估人力成本预算

2. **商业价值评估**  
   - 不评估ROI计算
   - 不评估市场前景
   - 不评估商业模式可行性
   - 不评估成本效益分析

3. **技术选型评估**
   - 不评估技术栈选择
   - 不评估架构设计合理性
   - 不评估技术可行性
   - 不评估性能指标

4. **项目周期评估**
   - 不评估开发时间安排
   - 不评估里程碑设置
   - 不评估资源分配
   - 不评估项目风险

#### ✅ 重点评估的内容

评审应专注于以下**需求质量相关**的方面：

1. **需求描述质量**
   - 需求表述是否清晰明确
   - 是否存在歧义或模糊表述
   - 用户故事是否完整

2. **功能完整性**
   - 功能模块是否覆盖完整
   - 业务流程是否闭环
   - 边界条件是否考虑充分

3. **逻辑一致性**
   - 模块间数据流是否合理
   - 权限设置是否一致
   - 业务规则是否冲突

4. **可测试性**
   - 验收标准是否明确
   - 是否可以编写测试用例
   - 是否支持自动化测试

5. **用户体验**
   - 用户操作流程是否顺畅
   - 界面交互是否合理
   - 是否考虑了用户使用场景

### 评审输出要求

评审报告应包含：
- **需求澄清问题清单**：需要进一步明确的需求点
- **功能完善建议**：功能缺失或不完整的地方
- **逻辑优化建议**：业务逻辑可以改进的地方
- **用户体验改进**：提升用户使用体验的建议
- **测试关注点**：需要重点测试的功能和场景

### 评审决策标准

评审结论应基于：
- 需求是否清晰完整
- 功能设计是否合理
- 用户体验是否良好
- 是否具备可实施性

**不应基于**：
- 商业价值判断
- 技术实现难度
- 人力资源情况
- 项目时间安排

---

## 开发流程约定

### 分期实施原则
- **一期**: 核心业务流程实现，满足基本业务需求
- **二期**: 增值功能和数据分析能力

### 质量标准
- 代码覆盖率 > 80%
- TypeScript严格模式
- ESLint + Prettier代码规范
- 所有API必须有文档

### 测试策略
- 单元测试：核心业务逻辑
- 集成测试：API接口和数据库
- E2E测试：关键业务流程

---

## 注意事项

1. **数据安全**: 涉及商业机密的门店信息，需严格权限控制
2. **性能要求**: 支持大量门店数据的并发访问
3. **移动适配**: 重要功能需支持移动端操作
4. **审批流程**: 核心业务环节，需确保稳定可靠
5. **企微集成**: 用户体验的关键环节，需重点测试

---

## 开发环境配置

### 端口配置
- **前端服务器**: `http://localhost:7800` (绑定IPv4)
- **后端API服务器**: `http://localhost:7900` (绑定IPv4)

### 启动命令
```bash
# 前端启动（端口 7800）
cd frontend
npm run dev -- --port 7800 --host 0.0.0.0

# 后端启动（端口 7900）  
cd backend
PORT=7900 HOST=0.0.0.0 npm run dev
```

### 端口冲突处理
如果端口被占用，使用以下命令找到并终止占用进程：
```bash
# Windows系统
netstat -ano | findstr :7800
netstat -ano | findstr :7900
taskkill /PID <进程ID> /F

# Linux/Mac系统
lsof -ti:7800 | xargs kill -9
lsof -ti:7900 | xargs kill -9
```

### API配置
- 前端请求后端API: `http://localhost:7900/api/v1`
- API文档地址: `http://localhost:7900/docs`
- 健康检查: `http://localhost:7900/health`

---

*本文档随项目发展持续更新，所有团队成员应遵循此规范进行开发*